(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(44)},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(10),s=n.n(a),u=n(0),c=n.n(u),o=n(14),r=n(16),l=n(11),i=n(12),m=n(15),h=n(13),d=n(17),f=function(e){var t=e.name,n=e.phone,a=(e.id,e.handleDelete);return c.a.createElement("tr",null,c.a.createElement("td",null,t),c.a.createElement("td",null,n),c.a.createElement("td",null,c.a.createElement("button",{onClick:a},"poista")))},p=function(e){var t=e.value,n=e.handleChange;return c.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4:  ",c.a.createElement("input",{value:t,onChange:n}))},g=function(e){var t=e.message,n=e.className;return t?c.a.createElement("div",{className:n},t):null},v=n(2),S=n.n(v),w="/api/persons",E={getAll:function(){return S.a.get(w).then(function(e){return e.data})},create:function(e){return S.a.post(w,e).then(function(e){return e.data})},remove:function(e){return S.a.delete("".concat(w,"/").concat(e)).then(function(e){return e.data})},update:function(e,t){return S.a.put("".concat(w,"/").concat(e),t).then(function(e){return e.data})}},b=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={persons:[],newName:"",newPhone:"",filter:"",successMsg:null,successStatus:null},n.componentDidMount=function(){E.getAll().then(function(e){n.setState({persons:e})})},n.tryAddingUser=function(e){E.create(e).then(function(e){var t=n.state.persons.concat(e);n.setState({persons:t,newName:"",newPhone:"",successMsg:"".concat(e.name," onnistuneesti lis\xe4tty"),successStatus:"success"}),setTimeout(function(){n.setState({successMsg:null,successStatus:null})},3500)}).catch(function(e){n.setState({successMsg:"lis\xe4\xe4minen ep\xe4onnistui, valitan",successStatus:"error"}),setTimeout(function(){n.setState({successMsg:null,successStatus:null})},3500)})},n.setNameAndNumber=function(e){e.preventDefault();var t=n.state.newName,a=n.state.persons.find(function(e){return e.name===t});if(a){if(window.confirm("".concat(t," on jo luettelossa, korvataanko vanha numero uudella?"))){var s=Object(r.a)({},a,{phone:n.state.newPhone});E.update(s.id,s).then(function(e){var a=n.state.persons.filter(function(t){return t.id!==e.id});n.setState({persons:a.concat(e),newName:"",newPhone:"",successMsg:"puhelinnumero hl\xf6lle: ".concat(t," onnistuneesti muutettu"),successStatus:"success"}),setTimeout(function(){n.setState({successMsg:null,sucessStatus:null})},3500)}).catch(function(e){e.response&&404===e.response.status?(E.getAll().then(function(e){n.setState({persons:e})}),n.tryAddingUser(s)):(n.setState({successMsg:"oudohko virhe, ei onnistunut",successStatus:"error"}),setTimeout(function(){n.setState({successMsg:null,successStatus:null})},3500))})}}else{var u={name:n.state.newName,phone:n.state.newPhone};n.tryAddingUser(u)}},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handlePhoneChange=function(e){n.setState({newPhone:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.handleDelete=function(e,t){return function(){window.confirm("poistetaanko ".concat(t,"?"))&&E.remove(e).then(function(){n.setState({persons:n.state.persons.filter(function(t){return t.id!==e}),successMsg:"".concat(t," onnistuneesti poistettu"),successStatus:"success"}),setTimeout(function(){n.setState({successMsg:null,successStatus:null})},3500)}).catch(function(e){console.log("error: ",e),n.setState({successMsg:"error",successStatus:"error"}),setTimeout(function(){n.setState({successMsg:null,successStatus:null})},3500)})}},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=Object(o.a)(this.state.persons);""!==this.state.filter&&(t=t.filter(function(t){return t.name.toLowerCase().includes(e.state.filter.toLowerCase())}));var n=t.map(function(t){return c.a.createElement(f,{key:t.name,name:t.name,phone:t.phone,handleDelete:e.handleDelete(t.id,t.name)})});return c.a.createElement("div",null,c.a.createElement("h2",null,"Puhelinluettelo"),c.a.createElement(p,{value:this.state.filter,handleChange:this.handleFilterChange}),c.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),c.a.createElement(g,{message:this.state.successMsg,className:this.state.successStatus}),c.a.createElement("form",{onSubmit:this.setNameAndNumber},c.a.createElement("div",null,"nimi:   ",c.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),c.a.createElement("div",null,"numero: ",c.a.createElement("input",{value:this.state.newPhone,onChange:this.handlePhoneChange})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),c.a.createElement("h3",null,"Numerot"),c.a.createElement("table",null,c.a.createElement("tbody",null,n)))}}]),t}(c.a.Component);n(42);s.a.render(c.a.createElement(b,{notes:[{id:1,content:"HTML on helppoa",date:"2017-12-10T17:30:31.098Z",important:!0},{id:2,content:"Selain pystyy suorittamaan vain javascripti\xe4",date:"2017-12-10T18:39:34.091Z",important:!1},{id:3,content:"HTTP-protokollan t\xe4rkeimm\xe4t metodit ovat GET ja POST",date:"2017-12-10T19:20:14.298Z",important:!0}]}),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.6aa64190.chunk.js.map